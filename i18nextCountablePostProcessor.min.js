!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.i18nextCountablePostProcessor=r()}(this,function(){"use strict";"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(t){return this._invoke("next",t)},t.prototype.throw=function(t){return this._invoke("throw",t)},t.prototype.return=function(t){return this._invoke("return",t)};function c(t){this.value=t}function t(o){var a,i;function s(t,r){try{var n=o[t](r),e=n.value;e instanceof c?Promise.resolve(e.value).then(function(t){s("next",t)},function(t){s("throw",t)}):u(n.done?"return":"normal",n.value)}catch(t){u("throw",t)}}function u(t,r){switch(t){case"return":a.resolve({value:r,done:!0});break;case"throw":a.reject(r);break;default:a.resolve({value:r,done:!1})}(a=a.next)?s(a.key,a.arg):i=null}this._invoke=function(e,o){return new Promise(function(t,r){var n={key:e,arg:o,resolve:t,reject:r,next:null};i?i=i.next=n:(a=i=n,s(e,o))})},"function"!=typeof o.return&&(this.return=void 0)}function l(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)}var p=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n,e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};return{name:"countable",type:"postProcessor",options:{variantSeparator:"_",countVariableName:"count"},setOptions:function(r){var n=this;Object.keys(r).forEach(function(t){"string"==typeof n.options[t]&&(n.options[t]=r[t])})},buildTryKeysList:function(t){var r=t.translationKey,n=t.variantSeparator,e=t.count,o=String(e),a=[""+r+n+o];return 2<o.length&&a.push(""+r+n+"*"+o.substr(-3)),1<o.length&&a.push(""+r+n+"*"+o.substr(-2)),a.push(""+r+n+"*"+o),1<e&&a.push(""+r+n+"plural"),a.push(r),a},process:function(t,r,n,e){var o=p({},this.options,n),a=(o.postProcess,o.variantSeparator),i=(o.translationKeyword,function(t,r){var n,e={};for(n in t)0<=r.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(o,["postProcess","variantSeparator","translationKeyword"])),s=i[i.countVariableName];if(void 0===s)return t;for(var u=Array.isArray(r)?r:[r],c=[],f=0;f<u.length;f++)c=[].concat(l(c),l(this.buildTryKeysList({translationKey:u[f],count:s,variantSeparator:a})));return e.translate(c,i)||t}}});
